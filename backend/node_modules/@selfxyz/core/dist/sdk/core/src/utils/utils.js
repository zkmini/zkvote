"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseSolidityCalldata = parseSolidityCalldata;
exports.getUserIdentifier = getUserIdentifier;
const constants_1 = require("../../../../common/src/constants/constants");
const uuid_1 = require("../../../../common/src/utils/circuits/uuid");
function parseSolidityCalldata(rawCallData, _type) {
    const parsed = JSON.parse('[' + rawCallData + ']');
    return {
        a: parsed[0].map((x) => x.replace(/"/g, '')),
        b: parsed[1].map((arr) => arr.map((x) => x.replace(/"/g, ''))),
        c: parsed[2].map((x) => x.replace(/"/g, '')),
        pubSignals: parsed[3].map((x) => x.replace(/"/g, '')),
    };
}
async function getUserIdentifier(publicSignals, user_identifier_type = 'uuid') {
    return (0, uuid_1.castToUserIdentifier)(BigInt(publicSignals[constants_1.CIRCUIT_CONSTANTS.VC_AND_DISCLOSE_USER_IDENTIFIER_INDEX]), user_identifier_type);
}
